<!--
title: Test to see
description: 
published: true
date: 2024-07-29T07:47:59.632Z
tags: test tag, test tag2, test tag3
editor: ckeditor
dateCreated: 2024-07-26T07:48:42.912Z
-->

<p><strong>VWSA</strong></p>
<p><em><strong>PPSo for Special Markets</strong></em></p>
<p><em><strong>Installation Guide</strong></em></p>
<p><em><strong>Version 1.0.1</strong></em></p>
<p>Confidentiality and Copyright</p>
<p>Proprietary, confidential data. All rights reserved.</p>
<p>Distribution and/or reproduction of these documents or any of their parts, their utilisation or communication of their contents to third parties is not allowed, unless formally conceded. Contravention will cause damages.</p>
<p>Copyright © 2019 by S4 Integration (Pty) Ltd.</p>
<p>S4 Integration (Pty) Ltd.</p>
<p>1 Leadwood Crescent</p>
<p>Fairview</p>
<p>Port Elizabeth</p>
<p>South Africa</p>
<p>6065</p>
<p><a class="is-external-link" href="http://www.s4.co.za">www.s4.co.za</a></p>
<p>**<br>
**</p>
<p><strong>Table of Contents</strong></p>
<p>Confidentiality and Copyright 2</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">1 Document Information 5</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">1.1 Change History 5</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">1.2 Review Record 5</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2 Installation 6</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.1 Additions 6</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.1.1 Front-end Web Application 6</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.1.2 Independent Data Access Layer 6</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.1.3 SQL database tables 6</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2 appsettings.json setup 7</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2.1 Connection String 7</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2.2 LDAP connection details 7</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2.3 Token Key 8</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2.4 RWIL connection details 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.2.5 PAT connection details 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.3 environment.prod.ts setup 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.3.1 apiUrl 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.4 Install Node Modules</a> 10</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.4.1 npm install</a> 10</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.5 Publish for Data access layer</a> 11</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl">2.5.1 dotnet publish</a> 11</p>
<p><strong>Table of Figures</strong></p>
<p><em>Figure 1: Database Connection String</em> 7</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 2: LDAP connection details</em> 7</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 3: Token Key</em></a> 8</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 4: RWIL connection details</em> 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 5: PAT connection details</em> 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 6: set apiUrl</em> 9</a></p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 7: npm install example</em> 1</a>0</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 8: replace sweetalert</em> 1</a>0</p>
<p><a class="is-internal-link is-invalid-page" href="/Test_to_see/%5Cl"><em>Figure 9: Release build configuration command output</em> 1</a>1</p>
<h1 class="toc-header" id="document-information"> Document Information</h1>
<h2 class="toc-header" id="change-history"> Change History</h2>
<div class="table-container"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Date</strong></td>
<td><strong>Version</strong></td>
<td><strong>Changed Chapters</strong></td>
<td><strong>Author</strong></td>
</tr>
<tr>
<td>2021/09/20</td>
<td>1.0.0</td>
<td>Initial Document</td>
<td>Robert Zeelie</td>
</tr>
<tr>
<td>2021/10/01</td>
<td>1.0.1</td>
<td>Deploment changes and Phase 2 additions</td>
<td>Robert Zeelie</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
<h2 class="toc-header" id="review-record"> Review Record</h2>
<div class="table-container"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Date</strong></td>
<td><strong>Reviewed Version</strong></td>
<td><strong>Comments</strong></td>
<td><strong>Reviewer</strong></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
<h1 class="toc-header" id="installation"> Installation</h1>
<p>This document will cover the installation of phase one for the new PPSo for special markets application.</p>
<h2 class="toc-header" id="additions"> Additions</h2>
<h3 class="toc-header" id="front-end-web-application"> Front-end Web Application</h3>
<p>The Web application is written in Angular 12 which is a platform and framework for building single-page client applications.</p>
<h3 class="toc-header" id="independent-data-access-layer"> Independent Data Access Layer</h3>
<p>The Independent Data Access Layer is written in C# using .NET 5 and provides the end points that can be accessed from any Front-end.</p>
<h3 class="toc-header" id="sql-database-tables"> SQL database tables</h3>
<p>The Brand table is used for storing the different vehicle brands that are maintained by VWSA.</p>
<p>The AuditLog table is used for storing all the actions performed by the users during the application runtime.</p>
<p>The ErrorLog table is used for storing any errors that may occur during the application runtime.</p>
<p>The MaintainModel table is used for storing the information entered by the brand managers for the different vehicles.</p>
<p>The Model table is used for storing the different models that are maintained by VWSA.</p>
<p>The PartPrice table is used for storing the prices for the parts needed for the various services of the vehicles.</p>
<p>The Ppso table is used for storing the package information of a service event or position.</p>
<p>The PpsoPosition table is used for storing the various positions related to each PPSo package.</p>
<p>The ServiceEvent table is used for storing the different service events related to a VIN.</p>
<p>The ServiceMileage table is used for storing the multiple mileage intervals for each service event/position.</p>
<p>The ServicePosition table is used for storing the different service positions related to a VIN.</p>
<p>The ServiceTime table is used for storing the multiple time intervals for each service event/position.</p>
<p>The WMI table is used for storing the different World Manufacturing Id for each brand.</p>
<h2 class="toc-header" id="appsettingsjson-setup-in-data-access-layer"> appsettings.json setup in Data access layer</h2>
<h3 class="toc-header" id="connection-string"> Connection String</h3>
<p>The details for the Database connection can be set in the appsettings.json file. The connection string can be found under the “connectionStrings” section. The connection string property must be set to the required database connection string. At time of this document’s writing these elements are located on line 3 in the appsettings.json file. Example of a connection string where the red variables should be set: "Server=152.168.145.72;Initial Catalog=DatabaseName;Persist Security Info=False;Integrated Security=False;user id=ppsosmUser;password=ppsosmPass;Trusted_Connection=False;MultipleActiveResultSets=True;"</p>
<p><img alt="Screenshot 2021-09-20 111534" src="Test_to_see/media/image2.png"></p>
<p><em>Figure</em> <em>1</em>*: Database Connection String*</p>
<h3 class="toc-header" id="ldap-connection-details"> LDAP connection details</h3>
<p>These details handle the connection with ldap to the different Active Directories and is used to check a users group. The ldap path (“AdminPath”) is needed to connect to the internal AD and the username (“AdminServiceAccountUser”) and password (“AdminServiceAccountPassword”) are required for the system to be able to open a connection with the internal AD. The ldap path (“DmzPath”) is needed to connect to the AD on the DMZ and the username (“DmzServiceAccountUser”) and password (“DmzServiceAccountPassword”) are required for the system to be able to open a connection with the AD on the DMZ. To check the name of the users group that the user belongs to please set (“AdminGroupName”) and (“FleetGroupName”) which will determine which menu the user will be displayed. At time of writing this document these properties are from line 13 to 20 in the appsettings.json file.</p>
<p><img alt="Screenshot 2021-10-01 105427" src="Test_to_see/media/image3.png"></p>
<p><em>Figure</em> <em>2</em>*: LDAP connection details*</p>
<p>AdminServiceAccountUser &amp; DmzServiceAccountUser</p>
<p>- The service usernames used by the system to make the different AD calls.</p>
<p>AdminServiceAccountPassword &amp; DmzServiceAccountPassword</p>
<p>- The service passwords used by the system to make the different AD calls.</p>
<p>AdminPath &amp; DmzPath</p>
<p>- These are the domains hosting the AD servers. For example a server’s LDAP connection could be “LDAP://VWTest.local/OU=AdminUsers,DC=VWTest,DC=local” or “LDAP://152.167.107.58/OU=FPortal,DC=VWTest,DC=local”</p>
<p>FleetGroupName</p>
<p>- The name of the AD group to which the fleet users belong.</p>
<p>AdminGroupName</p>
<p>- The groups that will allow access to the Admin/Brand functionality.</p>
<p>Important to note that users on the fleet user Group will only have access to the fleet user menu and its functionality, while users on the Admin Groups will have access to the Admin menu and its Functionality.</p>
<h3 class="toc-header" id="token-key"> Token Key</h3>
<p>Add the value of key in appsettings.json and ensure that the value of the key is the same as the key used in the sharepoint application. The secret key given in this appsettings.json acts as a symmetric key that is known by both the sender and the receiver. At time of writing this document the key is found at line 21 in the appsettings.json file.</p>
<p><img alt="Screenshot 2021-09-20 121348" src="Test_to_see/media/image4.png"></p>
<p><em>Figure 3: Token Key</em></p>
<h3 class="toc-header" id="rwil-connection-details"> RWIL connection details</h3>
<p>These details handle the fetching of data from the RWIL endpoints. The username and password is required for the system to generate a token. The other three pieces of information is constant. At time of writing this document these properties are from line 23 to 24 in the appsettings.json file.</p>
<p><img alt="Screenshot 2021-09-20 121436" src="Test_to_see/media/image5.png"></p>
<p><em>Figure</em> <em>4: RWIL connection details</em></p>
<h3 class="toc-header" id="pat-connection-details"> PAT connection details</h3>
<p>These details handle the fetching of data from the PAT endpoints. The username (which is the client Id) and password (which is the client secret) is required for the system to generate a token and need to be set. The other pieces of information are constant. At time of writing this document these properties are from line 30 to 31 in the appsettings.json file.</p>
<p><img alt="Screenshot 2021-09-20 121516" src="Test_to_see/media/image6.png"></p>
<p><em>Figure 5: PAT connection details</em></p>
<h2 class="toc-header" id="environmentprodts-setup-in-client-web-application"> environment.prod.ts setup in Client web application</h2>
<h3 class="toc-header" id="apiurl"> apiUrl</h3>
<p>Navigate to the environment.prod.ts file in the environment folder and change the apiUrl to the url where the front-end can find the independent data access layer and call the end points. For example, if the independent data access layer is found at “<a class="is-external-link" href="https://VWSA/PPSO/%E2%80%9D">https://VWSA/PPSO/”</a> then the Url will be “<a class="is-external-link" href="https://VWSA/PPSO/api/%E2%80%9D">https://VWSA/PPSO/api/”</a>. Please ensure to add the ‘/api/’.</p>
<p><img alt="Screenshot 2021-09-21 125523" src="Test_to_see/media/image7.png"></p>
<p><em>Figure 6: set apiUrl</em></p>
<h2 class="toc-header" id="install-node-modules-for-client-web-application"> Install Node Modules for Client web Application</h2>
<h3 class="toc-header" id="npm-install-and-build"> npm install and build</h3>
<p>(npm and angular cli must be installed before continuing and running these commands)</p>
<p>First navigate to the folder where the client web application is saved and enter in the command ‘npm install’ to install all the required node modules. After installation has completed please copy the sweetalert folder from our customized modules folder in the repository and replace the sweetalert folder that has been generated in the node_modules. Next you must enter the command ‘ng build --prod --base-href ./’ to start the production build which will generate the necessary files for deployment in ‘dist/project-name’ by default. Copy the contents of the dist/my-project-name folder to your web server. Because these files are static, you can host them on any web server capable of serving files.</p>
<p><img alt="Screenshot 2021-09-21 091949" src="Test_to_see/media/image8.png"></p>
<p><em>Figure 7: npm install example</em></p>
<p><img alt="Screenshot 2021-09-21 092727" src="Test_to_see/media/image9.png"></p>
<p><em>Figure 8: replace sweetalert</em></p>
<h2 class="toc-header" id="publish-for-data-access-layer"> Publish for Data access layer</h2>
<h3 class="toc-header" id="dotnet-publish"> Dotnet publish</h3>
<p>First navigate to the folder where the data access layer is saved and open up a new terminal. Run the command ‘dotnet publish api -r win-x64 --self-contained true’ which specifies the Release build configuration that has minimal symbolic debug information and is fully optimized. For example if the data access layer is saved in ‘C:\Users\S4\Documents\GitHub\Data-Access-Layer’ you would navigate to that directory and execute the command. Once completed the command will output where you will find the publish folder and the necessary files needed for deployment. Copy the contents of the publish folder to your web server, open up a terminal and navigate to the folder that holds the copied over files and run ‘.\api.exe’ or run ‘dotnet api.dll’.</p>
<p><img alt="Screenshot 2021-09-22 095147" src="Test_to_see/media/image10.png"></p>
<p><em>Figure 9: Release build configuration command output</em></p>
